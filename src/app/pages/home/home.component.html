<section>
    <h1 fxLayoutAlign="center">Book Store</h1>
    <form fxLayout="column" fxLayoutAlign="center" matSort>
        <div class="search-sort">
            <div class="search">
                <mat-form-field>
                    <input
                        matInput
                        type="text"
                        (keyup)="doFilter($any($event.target).value)"
                        placeholder="Search"
                    >
                </mat-form-field>
            </div>
            <mat-paginator
                [pageSize]="10"
                [pageSizeOptions]="[5, 10, 15, 20, 25, 30]"
                aria-label="Select page"
            ></mat-paginator>
        </div>
        <mat-table [dataSource]="bookSource">
            <ng-container matColumnDef="image">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Image
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    <img src="{{ book.image }}">
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="name">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Name
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.name }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="genre">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Genre
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.genre }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="pageNumber">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Number of pages
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.pageNumber | number }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="author">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Author
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.author }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="publishDate">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Publish date
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.publishDate | date }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="price">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Price
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    {{ book.price | number }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="rating">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Rating
                </mat-header-cell>
                <mat-cell *matCellDef="let book">
                    <span *ngFor="let star of getStars(book.rating)" class="star-icon">
                        <mat-icon>{{ star }}</mat-icon>
                    </span>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayColumns"></mat-header-row>
            <mat-row 
                *matRowDef="let rows; columns: displayColumns;"
                [routerLink]="['/book', rows.id]"
            ></mat-row>
        </mat-table>
    </form>
</section>